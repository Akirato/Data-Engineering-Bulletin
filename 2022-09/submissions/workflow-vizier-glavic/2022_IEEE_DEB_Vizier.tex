\documentclass[11pt]{article}

\usepackage{deauthor,times,graphicx}
\usepackage{color,colortbl}
% \usepackage[dvipsnames]{xcolor}
% \usepackage{hyperref}
\usepackage{amsmath}
\usepackage{amssymb}
\let\proof\relax
\let\endproof\relax
\usepackage{amsthm}
\usepackage{cleveref}
\usepackage{wrapfig}
\usepackage{url}
\usepackage{stmaryrd,amssymb}
\usepackage{listings}
\usepackage{algorithm}
% \usepackage[noend]{algorithmic}
\usepackage{fancybox}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Theorems, Definitions, Examples
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newtheorem{theo}{Theorem}
\numberwithin{theo}{section}
\newtheorem{lem}[theo]{Lemma}
\newtheorem{propo}[theo]{Proposition}
\newtheorem{coll}[theo]{Corollary}
\newtheorem{exam}{Example}
\numberwithin{exam}{section}
\newtheorem{defi}{Definition}
\numberwithin{defi}{section}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{todonotes}
\newcommand{\BG}[1]{\todo[inline]{\textbf{Boris:} #1}}
\newcommand{\OK}[1]{\todo[inline]{\textbf{Oliver:} #1}}
\newcommand{\JF}[1]{\todo[inline]{\textbf{Juliana:} #1}}
\newcommand{\MB}[1]{\todo[inline]{\textbf{Mike:} #1}}

\newcommand{\jfedit}[1]{\textcolor{red} {#1}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% OUR SETUP
\newcommand{\mypara}[1]{\medskip\noindent\textbf{{#1}.}}

\ifdefined\thead
\else
  \newcommand{\thead}[1]{\textbf{#1}}
\fi
\newcommand{\rowcaveat}{\textbf{\textcolor{red}{$\ast$}}}
\newcommand{\pdb}{\mathcal{D}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DOCUMENT
\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% LST DEFS

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Colors
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\definecolor{lstpurple}{rgb}{0.5,0,0.5}
\definecolor{lstred}{rgb}{1,0,0}
\definecolor{lstreddark}{rgb}{0.7,0,0}
\definecolor{lstredl}{rgb}{0.64,0.08,0.08}
\definecolor{lstmildblue}{rgb}{0.66,0.72,0.78}
\definecolor{lstblue}{rgb}{0,0,1}
\definecolor{lstmildgreen}{rgb}{0.42,0.53,0.39}
\definecolor{lstgreen}{rgb}{0,0.5,0}
\definecolor{lstorangedark}{rgb}{0.6,0.3,0}
\definecolor{lstorange}{rgb}{0.75,0.52,0.005}
\definecolor{lstorangelight}{rgb}{0.89,0.81,0.67}
\definecolor{lstbeige}{rgb}{0.90,0.86,0.45}


% Declare bold typewriter font with Computer Modern
\DeclareFontShape{OT1}{cmtt}{bx}{n}{<5><6><7><8><9><10><10.95><12><14.4><17.28><20.74><24.88>cmttb10}{}

%%%%%%%%%% SQL + proveannce listing settings
\lstdefinestyle{psql}
{
tabsize=2,
basicstyle=\small\upshape\ttfamily,
language=SQL,
morekeywords={PROVENANCE,BASERELATION,INFLUENCE,COPY,ON,TRANSPROV,TRANSSQL,TRANSXML,CONTRIBUTION,COMPLETE,TRANSITIVE,NONTRANSITIVE,EXPLAIN,SQLTEXT,GRAPH,IS,ANNOT,THIS,XSLT,MAPPROV,cxpath,OF,TRANSACTION,SERIALIZABLE,COMMITTED,INSERT,INTO,WITH,SCN,UPDATED,PARTITION,BY,PRECEDING,FOLLOWING,CURRENT,ROW,ROWS,RANGE,GROUPING,SETS,CUBE,ROLL,UP},
extendedchars=false,
keywordstyle=\bfseries,
mathescape=true,
escapechar=@,
sensitive=true
}


%%%%%%%%%% SQL + proveannce listing settings - colorful version
\lstdefinestyle{psqlcolor}
{
tabsize=2,
basicstyle=\small\upshape\ttfamily,
language=SQL,
morekeywords={PROVENANCE,BASERELATION,INFLUENCE,COPY,ON,TRANSPROV,TRANSSQL,TRANSXML,CONTRIBUTION,COMPLETE,TRANSITIVE,NONTRANSITIVE,EXPLAIN,SQLTEXT,GRAPH,IS,ANNOT,THIS,XSLT,MAPPROV,OF,TRANSACTION,SERIALIZABLE,COMMITTED,INSERT,INTO,WITH,SCN,UPDATED},
extendedchars=false,
keywordstyle=\bfseries\color{lstpurple},
deletekeywords={count,min,max,avg,sum},
keywords=[2]{count,min,max,avg,sum,first,last,lead,lag,cxpath},
keywordstyle=[2]\color{lstblue},
stringstyle=\color{lstreddark},
commentstyle=\color{lstgreen},
mathescape=true,
escapechar=@,
sensitive=true
}


%%%%%%%%%% DATALOG style
\lstdefinestyle{datalog}
{
basicstyle=\footnotesize\upshape\ttfamily,
language=prolog
}




%%%%%%%%%% listings settings for pseudo code
\lstdefinestyle{pseudocode}
{
  tabsize=3,
  basicstyle=\small,
  language=c,
  morekeywords={if,else,foreach,case,return,in,or},
  extendedchars=true,
  mathescape=true,
  literate={:=}{{$\gets$}}1 {<=}{{$\leq$}}1 {!=}{{$\neq$}}1 {append}{{$\listconcat$}}1 {calP}{{$\cal P$}}{2},
  keywordstyle=\color{lstpurple},
  escapechar=&,
  numbers=left,
  numberstyle=\color{lstgreen}\small\bfseries,
  stepnumber=1,
  numbersep=5pt,
}

% \definecolor{pynotebookcellbg}{RGB}{247,247,247}
\definecolor{pynotebookcellbg}{gray}{0.95}

\lstdefinestyle{pynotebook}
{
  tabsize=3,
  basicstyle=\small\upshape\ttfamily,
  language=python,
  extendedchars=true,
  mathescape=true,
  morekeywords={show,read_csv,read_geojson,groupby,spatial_join,geocode,count},
  keywordstyle=\color{Blue},
  stringstyle=\itshape\color{Sepia},
  identifierstyle=\bfseries\color{OliveGreen},
  escapechar=&,
  numbers=left,
  numberstyle=\tiny\bfseries\ttfamily\color[gray]{0.7},
  stepnumber=1,
  numbersep=5pt,
  frame=single,
  frameround=tttt,
  backgroundcolor=\color{pynotebookcellbg}
}

\lstset{style=psqlcolor}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\tinysection}[1]{
  \medskip \noindent \textbf{#1}.
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TITLE AND AUTHORS
\title{The Right Tool for the Job: Data-Centric Workflows in Vizier}
%\title{It's a Notebook, It's a Spreadsheet, \ldots It's Vizier!}

\author{Oliver Kennedy,$^{\star}$~~Boris Glavic,$^{\diamond}$~~Juliana Freire,$^{\dagger}$~~and~~Michael Brachmann$\,^{\star}$\\
$^{\star}$~University at Buffalo, USA\\
$^{\diamond}$~Illinois Institute of Technology, USA\\
$^{\dagger}$~New York University, USA
}

\maketitle

\graphicspath{{submissions/workflow-vizier-glavic/}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ABSTRACT
\begin{abstract}
  Data scientists use a wide variety of systems with a wide variety of
  user interfaces such as spreadsheets and notebooks for their data
  exploration, discovery, preprocessing, and analysis
  tasks. % For instance, spreadsheet interfaces are used for manual curation and simple types of analysis; notebook interfaces are used for data preprocessing, analysis, and visualization; and big data platforms, workflow systems, and database systems are used for more advanced querying and for deploying data analysis pipelines that were prototyped using notebooks.
  While this wide selection of tools offers data scientists the
  freedom to pick the right tool for each task, each of these tools
  has limitations (e.g., the lack of
  reproducibility % and automatic refresh of outdated results in
  of
  notebooks), % or the limited support of spreadsheets to specify batch data transformations),
  data needs to be translated between tool-specific formats, and
  common functionality such as versioning, provenance, and dealing
  with data errors often has to be implemented for each
  system. We argue that rather than alternating between task-specific
  tools, a superior approach is to build multiple user-interfaces on top
  of a single incremental workflow / dataflow platform with built-in
  support for versioning, provenance, error \& tracking, and data
  cleaning. We discuss Vizier, a notebook system that implements this
  approach, introduce the challenges that arose in building such a
  system, % , and compare the approach against state-of-the-art systems. Furthermore, we
  and highlight how our work on Vizier lead to novel research in
  uncertain data management and incremental execution of workflows.
\end{abstract}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{submissions/workflow-vizier-glavic/sections/introduction}
% \input{sections/requirements}
\input{submissions/workflow-vizier-glavic/sections/overview}
\input{submissions/workflow-vizier-glavic/sections/artifacts}
% \input{sections/microkernel_architecture}
\input{submissions/workflow-vizier-glavic/sections/vizier}
% \input{sections/microkernel_architecture}
\input{submissions/workflow-vizier-glavic/sections/symbolic_artifacts}
% \input{sections/notebook_view}
\input{submissions/workflow-vizier-glavic/sections/spreadsheets}
\input{submissions/workflow-vizier-glavic/sections/caveats}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Conclusions and Future Work}
\label{sec:conclusions}

In this paper, we have made the case for a multi-modal data science platform built on top of an incremental, data-centric workflow engine and have introduced the reader to Vizier, our system implementing this vision. 
Because each modality (notebooks, spreadsheets, the caveat view, etc\ldots) is a ``view'' interacting with the same underlying workflow and datasets, it is easy to extend the system to support new interaction paradigms in the future.  Building our system so that cells execute in isolation and only interact through dataflow makes it easy to add new cell types to the system, because we only have to worry about the interaction of the new cell type with  data artifacts. 
Thus, adding support for other interaction modalities (e.g., new programming languages) into the system is straight-forward: we implement a new cell type and an API to access Vizier artifacts from within the modality.

As demonstrated in recent preliminary work, having a scheduler that revises its schedule based on dependencies discovered at runtime and using static dataflow analysis, we can execute notebook cells in parallel and avoid re-executing cells that are guaranteed not to change during automatic refresh.
Significantly more opportunities for avoiding work exist, in particular by leveraging Vizier's standardized representation of artifacts.
For example, by representing updates to dataset artifacts as change sets, existing approaches for incremental view maintenance can reduce the runtime overhead of recomputing workflow steps, as well as the space costs of preserving multiple artifact versions. Another interesting direction for future work is to study incremental maintenance of workflow results when the definition of a workflow step changes. This is an novel variation of the traditional incremental view maintenance problem where we have to update the result based on a change to the query rather than based on a change to the data.

Similarly, standard representations of artifacts can be used to help users better understand the outputs of their workflows.
For example, numerous efforts have explored causal explanations in database query results (\cite{DBLP:conf/sigmod/KanagalLD11,DBLP:journals/pvldb/MeliouGMS11,DBLP:journals/pvldb/MeliouRS14,DBLP:journals/ftdb/GlavicMR21}, and explainability in machine learning has recently become an area of active research.
For such techniques to be truly valuable, they need to operate across artifact types. For example, what would it take to link a sudden change in predictions made by a model to the addition of a new category in source data five transformations removed from the model training step. With Vizier's uncertainty model and provenance tracking we lay the ground work to develop methods for generating explanations that span multiple steps in a workflow. 

Finally, we note that Vizier provides a ``ground-up'' approach to stitching different interaction modalities into a single workflow.
Tools implemented as views over Vizier's workflow model seamlessly interact with each other, with coarse-grained provenance, reactive cell execution, and repeatability/reproducibility.
However, these capabilities are limited to a single Vizier instance, and are of limited value to already existing tools.
An important open challenge is the design of a federated infrastructure for data analytics workflows, allowing multiple Vizier instances or unrelated tools to interoperate.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ACKNOWLEDGEMENTS
\mypara{Acknowledgements} This work was supported by NSF Awards ACI-1640864, IIS-1750460, IIS-1956149, and IIS-2125516. % and \ldots

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% BIBLIOGRAPHY
%\bibliographystyle{abbrv}
%\bibliography{2022_IEEE_DEB_Vizier.bib}

\input{submissions/workflow-vizier-glavic/2022_IEEE_DEB_Vizier.bbl}

\end{document}
